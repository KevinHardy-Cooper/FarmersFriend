<!DOCTYPE html>
<html>
	<head>

		<!-- Character encoding -->
		<meta charset = "UTF-8">

		<!-- Assisting with scaling from desktop to mobile, inspired by https://www.w3schools.com/css/css_rwd_viewport.asp -->
		<meta name = "viewport" content = "width = device-width, initial-scale = 1">
		
		<!-- Page author -->
		<meta name = "author" content = "Kevin Hardy-Cooper">

		<!-- Page description -->
		<meta name = "description" content = "Create account to find and review farms">

		<!-- Title of the page -->
		<title>Farmer's Friend</title>

		<!-- Importing external stylesheets -->
		<link href="stylesheets/global.css" type="text/css" rel="stylesheet"/>
		<link href="stylesheets/registration.css" type="text/css" rel="stylesheet"/>
	</head>
	<body>
		<header>

			<!-- Navbar -->
			<nav>
				<ul>
					<li class = "justify-left">
						<a href = "index.html">
							Farmer's Friend
						</a>
					</li>
					<li class = "justify-right">
						<a href = "sign_in.html">
							Sign In
						</a>
					</li>
					<li class = "justify-right">

						<!-- When on this page, show tab as coloured -->
						<a class = "active" href = "">
							Sign Up
						</a>
					</li>
					<li class = "justify-right">
						<a href = "submission.html">
							Register Farm
						</a>
					</li>
					<li class = "justify-right">
						<a href = "search.html">
							Search
						</a>
					</li>
				</ul>
			</nav>
		</header>
		
		<!-- Skipping some lines for formatting -->
		<br>
		<br>

		<main>
			<article>

				<!-- Headline for the page -->
				<h1 class = "specific-padding">
					Create an account.
				</h1>

				<!-- Form begins... -->
				<div class = "specific-padding large-text">
					
					<!-- TODO: Set action attribute to somewhere useful -->
					<form method = "post" onsubmit = "return validate(this)">

						<!-- Full Name field -->
						<div class = "input-spacing required">
							<label>
								Full Name:
								<input class = "large-field" type = "text" placeholder = "Johnny Appleseed" name = "user_full_name" id = "user_full_name" required>
							</label>
							<div id = "user_full_name_status" class  = "errorStatus"></div>
						</div>

						<!-- Email Address field -->
						<div class = "input-spacing required">
							<label>
								Email Address:
								<input class = "large-field" type = "email" placeholder = "user@farm.com" name = "user_email_address" id = "user_email_address" required>
							</label>
							<div id = "user_email_address_status" class  = "errorStatus"></div>
						</div>
						
						<!-- Enter Password field -->
						<div class = "input-spacing required">
							<label>
								Create a password:
								<input class = "large-field" type = "password" name = "user_password" id = "user_password" required>
							</label>
							<div id = "user_password_status" class  = "errorStatus"></div>
							<p>
								Password must contain be at least 7 charcters long, must contain at least one lowercase and uppercase letter, and at least one number.  No spaces or special characters allowed.
							</p> 
						</div>

						<!-- Re-enter Password field -->
						<div class = "input-spacing required">
							<label>
								Re-enter password:
								<input class = "large-field" type = "password" id = "re_entered_password" required>
							</label>
							<div id = "re_entered_password_status" class  = "errorStatus"></div>
						</div>

						<!-- Date of Birth field -->
						<div class = "input-spacing">
							<label>
								Why do you want to make a Farmer's Friend account? <br> Please check all that apply:
							</label>

							<br>

							<label>
								<input class = "large-field" type = "checkbox" name = "purpose" value = "to_write_reviews"> 
								To Write Reviews
							</label> 
							<br>

							<label>
								<input class = "large-field" type = "checkbox" name = "purpose" value = "to_register_farms"> 
								To Register Farm(s)
							</label>	 
							<br>

							<label>
								<input class = "large-field" type = "checkbox" name = "purpose" value = "to_browse_amazing_farms"> 
								To Browse Amazing Farms 
							</label>
							<br>
						</div>

						<!-- Are you a farmer field -->
						<!-- TODO: Increase the size of the radio buttons -->
						<div class = "input-spacing">
							Are you a farmer?
							<label>
								<input class = "large-field" type = "radio" name = "user_is_farmer" value = "yes"> 
								Yes
							</label>
							<label>	
								<input class = "large-field" type = "radio" name = "user_is_farmer" value = "no"> 
								No
							</label>
						</div>

						<!-- Submit button field -->
						<div class = "input-spacing">
							<input class = "large-field" type = "submit" value = "Create">
						</div>
					</form>
				</div>
			</article>	

			<picture>
				<img class = "animal animal-right" alt = "Image of a cow" src = "filler">
			</picture>
			
		</main>

		<!-- Footer -->
		<footer>
			<p> 
				Made with 
				<picture>
					<source srcset = "assets/img/corn.png">
					<img alt = "Corn" class = "footer-emoji" src = "assets/img/corn.png"> 
				</picture>
				&nbsp;by Kevin Hardy-Cooper &copy; 2018
			</p>
		</footer>
	</body>
</html>
<script>
	function validate(form) {
		
		// check for empty required fields if HTML5 validation is not built into browser
		if (form.user_full_name.value == "") {
			document.getElementById("user_full_name_status").innerHTML = "No name entered";
			return false;
		}
		if (form.user_email_address.value == "") {
			document.getElementById("user_email_address_status") = "No email address entered";
			return false;
		}
		if (form.user_password.value == "") {
			document.getElementById("user_password_status") = "No password entered";
			return false;
		}
		if (form.re_entered_password.value == "") {
			document.getElementById("re_entered_password_status") = "Did not re-enter password";
			return false;
		}

		// now we will check if the values entered are valid
		// the full name cannot contain any numbers or special characters, letters only/  must be longer than 4 characters
		if (!validateFullName(form.user_full_name.value)) {
			document.getElementById("user_full_name_status").innerHTML = "Invalid full name";
		}
		if (!validateEmailAddress(form.user_email_address.value)) {
			document.getElementById("user_email_address_status").innerHTML = "Invalid email address";
		}


		// the email address cna use the html5 form validation, and then must use a more complicated regex expression after that
		// password must obey the rules stated above
		// re-entered password must equal the first password
		
	}

	function validateFullName(fullName) {

		// check that full name is between 1 and 20 characters, also check for if it starts with a capital letter, if the second + characters are letters as well, then if there is a space, then a capital letter, and  if a hyphen or apostrophe appears it is still valid 
		var fullNamePattern = /^[A-Z][a-z]+,?\s[A-Z][-'a-zA-Z]{0,19}$/;
		return fullNamePattern.test(fullName);
	}

	function validateEmailAddress(emailAddress) {

		// using regex from slides to validate email address
		var emailAddressPattern = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,})+$/;
		return emailAddressPattern.test(emailAddress);
	}

	function arePasswordsEqual(password1, password2) {
		if (password1 == password2) {
			return true;
		}
		return false;
	}
</script>
